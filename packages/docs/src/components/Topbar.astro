---
import { githubUrl } from "../../config";
import MainNav from "./MainNav.vue";
---

<header id="topbar">
  <div class="content">
    <a class="site-title" href="/">fronnt UI</a>
    <div class="main-nav-toggle" title="Menu">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="icon icon-tabler icon-tabler-menu"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        stroke-width="2"
        stroke="currentColor"
        fill="none"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M4 8l16 0"></path>
        <path d="M4 16l16 0"></path>
      </svg>
    </div>
    <div id="topbar-main-nav">
      <div class="main-nav-toggle" title="close">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="icon icon-tabler icon-tabler-x"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          stroke-width="2"
          stroke="currentColor"
          fill="none"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path d="M18 6l-12 12"></path>
          <path d="M6 6l12 12"></path>
        </svg>
      </div>
      <MainNav currentPath={Astro.url.pathname} />
    </div>
    <div class="right-nav">
      <a href="/hire-us/">Hire us</a>
      <a
        href={githubUrl}
        title="Github"
        target="_blank"
        rel="noopener noreferrer nofollow"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="icon icon-tabler icon-tabler-brand-github"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          stroke-width="2"
          stroke="currentColor"
          fill="none"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path
            d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"
          ></path>
        </svg>
      </a>
    </div>
  </div>
</header>

<style lang="scss">
  #topbar {
    backdrop-filter: blur(10px);
    background: rgba(white, 0.5);
    position: sticky;
    top: 0;
    z-index: 100;
  }

  .content {
    padding: 0.5rem var(--page-padding);
    max-width: var(--page-max-width);
    margin: 0 auto;
    display: flex;
    align-items: center;
    gap: 2rem;
    justify-content: space-between;

    @media screen and (min-width: 64rem) {
      gap: 4rem;
    }
  }
  .site-title {
    font-weight: bold;
  }

  .main-nav-toggle {
    display: flex;
    align-items: center;
    flex: 1;
    cursor: pointer;

    @media screen and (min-width: 64rem) {
      display: none;
    }
  }

  #topbar-main-nav {
    position: fixed;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
    background: white;
    height: 100vh;
    width: 100%;
    transform: translateX(-100%);
    transition: transform 200ms ease-in;

    .main-nav-toggle {
      position: absolute;
      top: 2rem;
      right: 2rem;
      cursor: pointer;
    }

    &.open {
      transform: translateX(0);
      transition: transform 200ms ease-out;
    }

    @media screen and (min-width: 64rem) {
      transform: translateX(0);
      transition: none;
      position: static;
      flex: 1;
      background: none;
      width: auto;
      height: auto;

      .close {
        display: none;
      }
    }
  }

  .right-nav {
    display: flex;
    align-items: center;
    a {
      display: flex;
      line-height: 3;
      text-decoration: none;
      border-radius: 0.5em;
      padding: 0 1em;
      transition: background-color 100ms ease;
      font-weight: bold;

      &:hover {
        background: var(--nn-color-gray-50);
      }
    }
  }
</style>

<script>
  const mainNav = document.getElementById("topbar-main-nav");

  document.querySelectorAll("#topbar .main-nav-toggle").forEach((btn) => {
    btn.addEventListener("click", () => {
      mainNav?.classList.toggle("open");
    });
  });
  window.addEventListener("resize", () => {
    if (window.innerWidth < 1024) {
      mainNav?.classList.remove("open");
    }
  });
</script>
